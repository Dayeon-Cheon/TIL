# ë¸”ë¡œê·¸ í”„ë¡œì íŠ¸ ~ing

## ë‹¤ì—° ë§¡ì€ ë¶€ë¶„ ğŸ’ª

### ê²Œì‹œê¸€ ë””í…Œì¼ í˜ì´ì§€ (~6/4 í™”ìš”ì¼)

- [x] ì»´í¬ë„ŒíŠ¸ êµ¬ì„±
- [x] ê²Œì‹œê¸€ ê°€ì ¸ì™€ì„œ ë³´ì—¬ì£¼ê¸°

  - [x] ì‘ì„±ì ë‹‰ë„¤ì„ ê°€ì ¸ì˜¤ê¸°
  - [x] ì´ë¯¸ì§€ url mapìœ¼ë¡œ ë¿Œë ¤ì£¼ê¸°
  - [x] ì‘ì„± ë‚ ì§œì™€ ì—…ë°ì´íŠ¸ ë‚ ì§œê°€ ë‹¤ë¥¼ ì‹œ ì—…ë°ì´íŠ¸ ë‚ ì§œë¥¼ ë³´ì—¬ì£¼ê¸°
  - [x] ë‚ ì§œ í‘œì‹œ YYYYë…„ MMì›” DDì¼(Dayjs ì‚¬ìš©)
  - [x] ê²Œì‹œê¸€ ë‚´ìš© ì—”í„°í‚¤ ì ìš© (css)

- [x] ëŒ“ê¸€ ê°€ì ¸ì™€ì„œ ë³´ì—¬ì£¼ê¸°

  - [x] ëŒ“ê¸€ ì •ë³´ì„ ëŒ“ê¸€ ì—…ë°ì´íŠ¸ ë‚ ì§œ ìµœì‹ ìˆœìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸°
  - [x] ì‘ì„±ì ì•„ì´ë””, ë‹‰ë„¤ì„, í”„ë¡œí•„ ì‚¬ì§„ ê°€ì ¸ì˜¤ê¸°
  - [x] ë³¸ì¸ì´ ì‘ì„±í•œ ëŒ“ê¸€ì¼ ê²½ìš° ìˆ˜ì •, ì‚­ì œ ê¸°ëŠ¥
    - [x] ëŒ“ê¸€ ìˆ˜ì • ì‹œ ìœ íš¨ì„± ê²€ì‚¬ (5ì ì´ìƒ)
  - [x] ëŒ“ê¸€ ë‚´ìš© ì—”í„°í‚¤ ì ìš© (css) ë¶€íƒë“œë¦¬ê¸°

- [x] ëŒ“ê¸€ ë‹¬ê¸°

  - [x] ë¡œê·¸ì¸ ì²´í¬ í›„ ë¹„ë¡œê·¸ì¸ ìƒíƒœì¼ ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜
  - [x] ëŒ“ê¸€ ë‚´ìš© ìœ íš¨ì„± ê²€ì‚¬ (5ì ì´ìƒ)
  - [ ] ëŒ“ê¸€ ë“±ë¡ ì‹œ ëŒ“ê¸€ì°½ ë¦¬ëœë”ë§

- [ ] ê³„ì • íŒ”ë¡œìš°/ì–¸íŒ”ë¡œìš° (6/5 ë‚˜ì¤‘ì— ì‹œê°„ ìˆì„ ê²½ìš° êµ¬í˜„)

  - [ ] ë¡œê·¸ì¸ ì²´í¬ í›„ ë¹„ë¡œê·¸ì¸ ìƒíƒœì¼ ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜
  - [ ] ë¡œê·¸ì¸ ìƒíƒœì¼ ì‹œ í•´ë‹¹ ê³„ì • íŒ”ë¡œìš° ì—¬ë¶€ í™•ì¸ í›„ ì´ë¯¸ íŒ”ë¡œìš° ì¤‘ì¼ ì‹œ ì–¸íŒ”ë¡œìš°, íŒ”ë¡œìš° í•˜ê³  ìˆì§€ ì•Šì„ ì‹œ íŒ”ë¡œìš° ë²„íŠ¼ í‘œì‹œ

- [ ] ê²Œì‹œê¸€ ì¢‹ì•„ìš” (6/5 ë‚˜ì¤‘ì— ì‹œê°„ ìˆì„ ê²½ìš° êµ¬í˜„)
- [ ] ë¦¬íŒ©í† ë§

### ê²Œì‹œê¸€ ë“±ë¡, ìˆ˜ì • í˜ì´ì§€ (~6/5 ìˆ˜ìš”ì¼)

- [ ] ê²Œì‹œê¸€ ë“±ë¡(ìœ íš¨ì„± ê²€ì‚¬)
- [ ] ê²Œì‹œê¸€ ìˆ˜ì •
- [ ] ë¦¬íŒ©í† ë§

---

### ëŒ“ê¸€ ë“±ë¡í•˜ê¸°

```js
const handleOnSubmit = async (e) => {
  e.preventDefault();

  // ë¹„ë¡œê·¸ì¸ ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜
  if (!isLoggedIn) {
    alert("ë¡œê·¸ì¸ í›„ ëŒ“ê¸€ì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
    window.location.href = "/login";
    return;
  }

  // ìœ íš¨ì„± ê²€ì‚¬ : ëŒ“ê¸€ 5ì ì´ìƒ
  if (content.trim().length < 5) {
    alert("ëŒ“ê¸€ì„ 5ì ì´ìƒ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
    return;
  }

  try {
    // ë¡œê·¸ì¸ ì‹œ ëŒ“ê¸€ ë“±ë¡
    const timestamp = dayjs().format("YYYY-MM-DD HH:mm:ss");
    const { commentError } = await supabase.from("Comments").insert({
      commentId: crypto.randomUUID(),
      userId: user.id,
      articleId,
      content,
      createdAt: timestamp,
      updatedAt: timestamp,
    });

    if (commentError) {
      throw commentError;
    } else {
      setContent("");
      setCommentsCount((prevCount) => prevCount + 1);
    }
  } catch (error) {
    console.error(error);
  }
};
```

### ë³¸ì¸ì´ ì‘ì„±í•œ ëŒ“ê¸€ì¼ ê²½ìš° ìˆ˜ì • ë° ì‚­ì œ

```js
// ëŒ“ê¸€ ìˆ˜ì • ëª¨ë“œ í† ê¸€
const toggleEditMode = (commentId, initialContent) => {
  setEditingCommentId(commentId);
  setEditedContent(initialContent);
};

// ëŒ“ê¸€ ìˆ˜ì •í•˜ê¸°
const handleUpdateComment = async (targetId) => {
  // ìœ íš¨ì„± ê²€ì‚¬ : ëŒ“ê¸€ 5ì ì´ìƒ
  if (editedContent.trim().length < 5) {
    alert("ëŒ“ê¸€ì„ 5ì ì´ìƒ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
    return;
  }

  try {
    const { commentUpdateError } = await supabase
      .from("Comments")
      .update({ content: editedContent })
      .eq("commentId", targetId);
    if (commentUpdateError) {
      throw commentUpdateError;
    }

    setComments((prevComments) =>
      prevComments.map((comment) =>
        comment.commentId === targetId
          ? { ...comment, content: editedContent }
          : comment
      )
    );

    setEditingCommentId(null);
  } catch (error) {
    console.error(error);
  }
};

// ëŒ“ê¸€ ì‚­ì œí•˜ê¸°
const handleDeleteComment = async (targetId) => {
  if (!confirm("ëŒ“ê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
    return;
  } else {
    try {
      const { commentDeleteError } = await supabase
        .from("Comments")
        .delete()
        .eq("commentId", targetId);

      if (commentDeleteError) {
        throw commentDeleteError;
      } else {
        setComments(
          comments.filter((comment) => comment.commentId !== targetId)
        );
      }
    } catch (error) {
      console.error(error);
    }
  }
};
```

```js
{
  user && comment.userId === user.id ? (
    <div>
      {editingCommentId === comment.commentId ? (
        <button onClick={() => handleUpdateComment(comment.commentId)}>
          ì €ì¥
        </button>
      ) : (
        <button
          onClick={() => toggleEditMode(comment.commentId, comment.content)}
        >
          ìˆ˜ì •
        </button>
      )}
      <button onClick={() => handleDeleteComment(comment.commentId)}>
        ì‚­ì œ
      </button>
    </div>
  ) : (
    ""
  );
}

{
  editingCommentId === comment.commentId ? (
    <input
      type="text"
      value={editedContent}
      onChange={(e) => setEditedContent(e.target.value)}
    />
  ) : (
    <div style={{ whiteSpace: "pre-wrap" }}>{comment.content}</div>
  );
}
```
